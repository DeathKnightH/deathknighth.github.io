(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{383:function(_,v,l){"use strict";l.r(v);var t=l(44),i=Object(t.a)({},(function(){var _=this,v=_.$createElement,l=_._self._c||v;return l("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[l("h1",{attrs:{id:"数据库系统"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#数据库系统"}},[_._v("#")]),_._v(" 数据库系统")]),_._v(" "),l("h2",{attrs:{id:"_1-数据库组成"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_1-数据库组成"}},[_._v("#")]),_._v(" 1. 数据库组成")]),_._v(" "),l("p",[_._v("一个完整的数据库大致由以下6个部分组成：")]),_._v(" "),l("ul",[l("li",[_._v("存储管理")])]),_._v(" "),l("p",[_._v("管理具体数据的存储、索引等，通常采用 B+ 树存储。")]),_._v(" "),l("ul",[l("li",[_._v("SQL 引擎")])]),_._v(" "),l("p",[_._v("解析/优化 SQL 语句。")]),_._v(" "),l("ul",[l("li",[_._v("权限管理")])]),_._v(" "),l("p",[_._v("管理数据库用户和角色权限。")]),_._v(" "),l("ul",[l("li",[_._v("事务管理")])]),_._v(" "),l("p",[_._v("管理事务和隔离级别。")]),_._v(" "),l("ul",[l("li",[_._v("日志管理(用于恢复/回滚数据)")])]),_._v(" "),l("p",[_._v("管理操作日志/数据日志的记录，也可以用来恢复/回滚数据。")]),_._v(" "),l("ul",[l("li",[_._v("客户端/服务端通信管理")])]),_._v(" "),l("p",[_._v("管理客户端和数据库的交互，处理客户端请求。")]),_._v(" "),l("p",[_._v("由于一个数据库系统涉及的模块太多，这里只记录比较重要的模块。")]),_._v(" "),l("h3",{attrs:{id:"_1-1-客户端管理器"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-客户端管理器"}},[_._v("#")]),_._v(" 1.1 客户端管理器")]),_._v(" "),l("p",[_._v("用于处理客户端通信。")]),_._v(" "),l("p",[_._v("客户端通过客户端管理器访问数据库，此时通常客户端管理器有以下作用：")]),_._v(" "),l("ul",[l("li",[_._v("调用权限管理验证客户端权限")]),_._v(" "),l("li",[_._v("管理客户端连接")]),_._v(" "),l("li",[_._v("接收 SQL 请求，并交给 SQL 引擎处理")]),_._v(" "),l("li",[_._v("将获取的结果集返回给客户端")])]),_._v(" "),l("h3",{attrs:{id:"_1-2-sql-引擎"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-sql-引擎"}},[_._v("#")]),_._v(" 1.2 SQL 引擎")]),_._v(" "),l("p",[_._v("一条 SQL 语句进入引擎会经过 "),l("code",[_._v("解析")]),_._v("、"),l("code",[_._v("重写")]),_._v("、"),l("code",[_._v("优化")]),_._v("、"),l("code",[_._v("编译")]),_._v("，最后才会执行。")]),_._v(" "),l("ul",[l("li",[_._v("解析")])]),_._v(" "),l("p",[_._v("输入的是原始的 SQL 语句，输出的是解析后的内部表示（通常是一个树型结构）。")]),_._v(" "),l("p",[_._v("解析过程会进行一系列的检查：")]),_._v(" "),l("ul",[l("li",[_._v("关键字是否正确")]),_._v(" "),l("li",[_._v("语法是否正确")]),_._v(" "),l("li",[_._v("数据库表、字段是否存在")]),_._v(" "),l("li",[_._v("运算类型是否正确")]),_._v(" "),l("li",[_._v("是否有权限读取/写入数据")])]),_._v(" "),l("ul",[l("li",[_._v("重写")])]),_._v(" "),l("p",[_._v("重写会进行一些预优化：")]),_._v(" "),l("ul",[l("li",[_._v("视图合并，将视图转换为对应的 SQL 查询。")]),_._v(" "),l("li",[_._v("删除冗余的Join。")]),_._v(" "),l("li",[_._v("子查询扁平化，尝试移除子查询，合并到主查询中。")]),_._v(" "),l("li",[_._v("计算常数并赋值。")])]),_._v(" "),l("ul",[l("li",[_._v("优化")])]),_._v(" "),l("p",[_._v("通常使用的是基于成本的优化（CBO）。\n最终生成一个相对较优的查询计划。")]),_._v(" "),l("ul",[l("li",[_._v("编译")])]),_._v(" "),l("p",[_._v("将查询计划编译为可执行的代码。")]),_._v(" "),l("ul",[l("li",[_._v("执行")])]),_._v(" "),l("p",[_._v("执行代码，与数据管理器交互，获取/写入数据。")])])}),[],!1,null,null,null);v.default=i.exports}}]);