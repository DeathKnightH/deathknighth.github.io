(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{371:function(_,t,a){_.exports=a.p+"assets/img/builder.drawio.3683628e.png"},450:function(_,t,a){"use strict";a.r(t);var v=a(44),r=Object(v.a)({},(function(){var _=this,t=_.$createElement,v=_._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h1",{attrs:{id:"生成器模式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#生成器模式"}},[_._v("#")]),_._v(" 生成器模式")]),_._v(" "),v("h2",{attrs:{id:"_1-概念"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-概念"}},[_._v("#")]),_._v(" 1. 概念")]),_._v(" "),v("p",[_._v("Builder 是一种创建型模式，主要目的是使用一组定义好的创建步骤创建不同的复杂对象。")]),_._v(" "),v("h2",{attrs:{id:"_2-意图"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-意图"}},[_._v("#")]),_._v(" 2. 意图")]),_._v(" "),v("p",[_._v("封装一个复杂对象的构造过程，允许子类/实现类自定义不同的构造步骤。")]),_._v(" "),v("h2",{attrs:{id:"_3-类图示例"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-类图示例"}},[_._v("#")]),_._v(" 3. 类图示例")]),_._v(" "),v("p",[v("img",{attrs:{src:a(371),alt:"builder"}})]),_._v(" "),v("p",[_._v("如图：")]),_._v(" "),v("ul",[v("li",[_._v("Builder 接口声明了所有通用的构造步骤。")]),_._v(" "),v("li",[_._v("ConcreteBuilder1/ConcreteBuilder2 具体的生成器，实现通用的构造步骤，也可以自定义，不使用通用构造步骤，最终通过 "),v("code",[_._v("getResult()")]),_._v(" 方法返回构造完成的产品。")]),_._v(" "),v("li",[_._v("Director 主管类用于定义调用构造步骤的顺序，是供 Client 业务逻辑使用的生成器核心类。")]),_._v(" "),v("li",[_._v("Client 必须指定具体的生成器实现，把它传给 Director 用于按特定步骤构造产品。")])]),_._v(" "),v("h2",{attrs:{id:"_4-适用场景"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_4-适用场景"}},[_._v("#")]),_._v(" 4. 适用场景")]),_._v(" "),v("h3",{attrs:{id:"_4-1-业务场景"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-业务场景"}},[_._v("#")]),_._v(" 4.1 业务场景")]),_._v(" "),v("ul",[v("li",[_._v("当一个对象的构造函数的可选参数特别多时，为了避免重载过多的构造函数，可以使用生成器模式：\n"),v("ul",[v("li",[_._v("只定义必须实现的构造步骤，其他可选的步骤交由子类/实现类来实现。")])])]),_._v(" "),v("li",[_._v("当构造的两种对象仅存在很细微的细节差别时，为了避免完全重写一个构造过程大部分相同的工厂类/构造函数，可以使用生成器模式：\n"),v("ul",[v("li",[_._v("在生成器的接口/抽象类中定义基本的生成步骤和构造过程。")]),_._v(" "),v("li",[_._v("在生成器的子类/实现类中负责具体的差异性细节的构造。")])])]),_._v(" "),v("li",[_._v("当构造的对象特别复杂或者是一个对象组合树时，可以使用生成器模式：\n"),v("ul",[v("li",[_._v("生成的步骤可在子类/实现类中自定义，可以重复或者递归调用某些步骤。")]),_._v(" "),v("li",[_._v("整个对象树/复杂对象生成完成前不会返回，避免业务逻辑使用一个不完整的复杂对象，造成难以定位的问题。")])])])]),_._v(" "),v("h3",{attrs:{id:"_4-2-开源实例"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-开源实例"}},[_._v("#")]),_._v(" 4.2 开源实例")]),_._v(" "),v("p",[_._v("JDK 中：")]),_._v(" "),v("ul",[v("li",[_._v("java.lang.StringBuilder")]),_._v(" "),v("li",[_._v("java.nio.ByteBuffer")])]),_._v(" "),v("h2",{attrs:{id:"_5-实现细节与技巧"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_5-实现细节与技巧"}},[_._v("#")]),_._v(" 5. 实现细节与技巧")]),_._v(" "),v("ul",[v("li",[_._v("通用步骤要尽可能的划分清晰，这是生成器模式的基础。")]),_._v(" "),v("li",[_._v("当具体产品没有统一的顶层接口时，每个生成器子类可能需要声明自己的返回产品对象的方法。")]),_._v(" "),v("li",[_._v("如果需要在具体生成器子类外控制生成器的构造步骤，那么可以使用一个 Director 类来管理。")])]),_._v(" "),v("h2",{attrs:{id:"_6-优缺点"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_6-优缺点"}},[_._v("#")]),_._v(" 6. 优缺点")]),_._v(" "),v("p",[_._v("优点：")]),_._v(" "),v("ul",[v("li",[_._v("符合单一原则。构造复杂对象的代码放在单一位置。")]),_._v(" "),v("li",[_._v("将复杂的构造步骤分开，可以方便地剔除不要的步骤，也可以递归调用某些步骤。")]),_._v(" "),v("li",[_._v("把生成步骤和产品类型解耦，就算是完全不相关的产品也可以复用构造步骤的代码。")])]),_._v(" "),v("p",[_._v("缺点：")]),_._v(" "),v("ul",[v("li",[_._v("生成器类随产品类型增多。")]),_._v(" "),v("li",[_._v("由于生成器返回的产品没有统一的类型接口，可能在产品类型增多后忽略原本生成器模式的使用。")])]),_._v(" "),v("h2",{attrs:{id:"_7-与其他设计模式的关系"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_7-与其他设计模式的关系"}},[_._v("#")]),_._v(" 7. 与其他设计模式的关系")]),_._v(" "),v("h3",{attrs:{id:"_7-1-与其他创建型模式的关系"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-与其他创建型模式的关系"}},[_._v("#")]),_._v(" 7.1 与其他创建型模式的关系")]),_._v(" "),v("ul",[v("li",[_._v("具体的生成器可以用单例模式实现。")]),_._v(" "),v("li",[_._v("生成器关注的是分步生成复杂对象，抽象工厂关注的是生成一系列对象。")]),_._v(" "),v("li",[_._v("生成器在执行完步骤后不会马上返回构造对象，可以做更多的生成步骤上的灵活定制，抽象工厂构建完成后会马上返回构建对象。")])]),_._v(" "),v("h3",{attrs:{id:"_7-2-与其他非创建型模式的关系"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-与其他非创建型模式的关系"}},[_._v("#")]),_._v(" 7.2 与其他非创建型模式的关系")])])}),[],!1,null,null,null);t.default=r.exports}}]);