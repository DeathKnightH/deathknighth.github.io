<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SQL 基础 | DeathKnightH&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="记录一些思路和细节">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.569dd3b1.js" as="script"><link rel="preload" href="/assets/js/2.1f448a3c.js" as="script"><link rel="preload" href="/assets/js/25.d35b508b.js" as="script"><link rel="prefetch" href="/assets/js/10.48292716.js"><link rel="prefetch" href="/assets/js/11.07267a7d.js"><link rel="prefetch" href="/assets/js/12.762ed7ee.js"><link rel="prefetch" href="/assets/js/13.1764ff4f.js"><link rel="prefetch" href="/assets/js/14.6c6790c5.js"><link rel="prefetch" href="/assets/js/15.bc0cc800.js"><link rel="prefetch" href="/assets/js/16.618b0843.js"><link rel="prefetch" href="/assets/js/17.320cbd40.js"><link rel="prefetch" href="/assets/js/18.f1bfd7da.js"><link rel="prefetch" href="/assets/js/19.590703f0.js"><link rel="prefetch" href="/assets/js/20.29de613d.js"><link rel="prefetch" href="/assets/js/21.e9cbee33.js"><link rel="prefetch" href="/assets/js/22.c27ed56d.js"><link rel="prefetch" href="/assets/js/23.cd08a5db.js"><link rel="prefetch" href="/assets/js/24.683b249a.js"><link rel="prefetch" href="/assets/js/26.161bb67b.js"><link rel="prefetch" href="/assets/js/27.27bd9992.js"><link rel="prefetch" href="/assets/js/28.a29f029b.js"><link rel="prefetch" href="/assets/js/29.870db969.js"><link rel="prefetch" href="/assets/js/3.b98f8752.js"><link rel="prefetch" href="/assets/js/30.2d5d6903.js"><link rel="prefetch" href="/assets/js/31.5f7bce62.js"><link rel="prefetch" href="/assets/js/32.986bb04a.js"><link rel="prefetch" href="/assets/js/33.7aa3f681.js"><link rel="prefetch" href="/assets/js/34.c357ba65.js"><link rel="prefetch" href="/assets/js/35.ed4eccf7.js"><link rel="prefetch" href="/assets/js/36.c7149114.js"><link rel="prefetch" href="/assets/js/37.95423ac9.js"><link rel="prefetch" href="/assets/js/38.330e24a9.js"><link rel="prefetch" href="/assets/js/39.4cff5279.js"><link rel="prefetch" href="/assets/js/4.e268862a.js"><link rel="prefetch" href="/assets/js/40.38af5ac0.js"><link rel="prefetch" href="/assets/js/41.1a5dfbd6.js"><link rel="prefetch" href="/assets/js/42.abcc6abd.js"><link rel="prefetch" href="/assets/js/43.857f9c43.js"><link rel="prefetch" href="/assets/js/44.4ee27852.js"><link rel="prefetch" href="/assets/js/45.9b3e8908.js"><link rel="prefetch" href="/assets/js/46.8c13f260.js"><link rel="prefetch" href="/assets/js/47.e6a9c113.js"><link rel="prefetch" href="/assets/js/48.160eb8b3.js"><link rel="prefetch" href="/assets/js/49.19e378da.js"><link rel="prefetch" href="/assets/js/5.0c896d33.js"><link rel="prefetch" href="/assets/js/6.2958d7f8.js"><link rel="prefetch" href="/assets/js/7.443a2828.js"><link rel="prefetch" href="/assets/js/8.535acfb0.js"><link rel="prefetch" href="/assets/js/9.e55eefe2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DeathKnightH's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java基础" class="dropdown-title"><span class="title">Java基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java基础" class="mobile-dropdown-title"><span class="title">Java基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/" class="nav-link">
  总览
</a></li><li class="dropdown-item"><!----> <a href="/java/thread/" class="nav-link">
  多线程
</a></li></ul></div></div><div class="nav-item"><a href="/tools/" class="nav-link">
  常用工具
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java基础" class="dropdown-title"><span class="title">Java基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java基础" class="mobile-dropdown-title"><span class="title">Java基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/" class="nav-link">
  总览
</a></li><li class="dropdown-item"><!----> <a href="/java/thread/" class="nav-link">
  多线程
</a></li></ul></div></div><div class="nav-item"><a href="/tools/" class="nav-link">
  常用工具
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>SQL 基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/database/sql/SQL.html#_1-语法基础" class="sidebar-link">1. 语法基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/database/sql/SQL.html#_1-1-ddl" class="sidebar-link">1.1 DDL</a></li><li class="sidebar-sub-header"><a href="/database/sql/SQL.html#_1-2-dml" class="sidebar-link">1.2 DML</a></li></ul></li><li><a href="/database/sql/SQL.html#_2-存储过程" class="sidebar-link">2. 存储过程</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="sql-基础"><a href="#sql-基础" class="header-anchor">#</a> SQL 基础</h1> <p>Structured Query Language（SQL，结构化查询语言）又称 ANSI SQL，由 ANSI 标准委员会管理。具体商业应用中每个数据库产品通常都有自己的 SQL 增强实现，比如 oracle 的 PL/SQL，sql server 的 Transact-SQL。</p> <h2 id="_1-语法基础"><a href="#_1-语法基础" class="header-anchor">#</a> 1. 语法基础</h2> <h3 id="_1-1-ddl"><a href="#_1-1-ddl" class="header-anchor">#</a> 1.1 DDL</h3> <p>Data definition language 数据定义语言。现在常用的数据库设计软件都可以直接导出 DDL 语句，通常不会自己手写 DDL，这里只列举一下常用 DDL 的使用方法，不做深入研究。</p> <h4 id="数据库"><a href="#数据库" class="header-anchor">#</a> 数据库</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>CREATE DATABASE test; // 创建名为 test 的数据库
USE test; // 使用名为 test 的数据库
DROP DATABASE test; // 删除名为 test 的数据库
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="表"><a href="#表" class="header-anchor">#</a> 表</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>CREATE TABLE testtable(
  column1 datatype1,
  ...
  columnn datatypen
  {,key define}{,index define}
); // 创建名为 testtable 的数据表

DROP TABLE testtable; // 删除名为 testtable 的数据表

ALTER TABLE testtable ADD columnx datatypex; // 修改数据表，增加列
ALTER TABLE testtable DROP COLUMN column1;   // 修改数据表，删除列 column1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="视图"><a href="#视图" class="header-anchor">#</a> 视图</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>CREATE VIEW testview AS subquery; // 根据子查询 subquery 创建视图 testview
DROP VIEW testview; // 删除视图 testview
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_1-2-dml"><a href="#_1-2-dml" class="header-anchor">#</a> 1.2 DML</h3> <p>Data manipulation language 数据操纵语言。日常开发中使用频率最高的 sql，通常说的增删改查都属于 DML。</p> <h4 id="_1-2-1-insert-插入"><a href="#_1-2-1-insert-插入" class="header-anchor">#</a> 1.2.1 insert 插入</h4> <ul><li>普通插入，将一条记录插入 tablename 表，其中 column1 值为 value1，column2 值为 value2。</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>INSERT INTO tablename(column1, column2)
VALUES(value1, value2);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>将查询结果集直接插入。</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>INSERT INTO tablename(column1, column2)
SELECT col1, col2
FROM table2;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_1-2-2-update-更新"><a href="#_1-2-2-update-更新" class="header-anchor">#</a> 1.2.2 update 更新</h4> <p>更新 tablename 表，将其中所有符合 condition 记录的 column1 属性更新为 value1</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UPDATE tablename
SET column1 = value1
WHERE condition;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_1-2-3-delete-删除"><a href="#_1-2-3-delete-删除" class="header-anchor">#</a> 1.2.3 delete 删除</h4> <p>删除 tablename 表中所有符合 condition 的记录，如果 condition 恒为 true，则删除表的所有记录。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>DELETE FROM tablename
WHERE condition;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>还有一个 DDL 语句可以实现删除表的所有记录：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>TRUNCATE TABLE tablename;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_1-2-4-select-查询"><a href="#_1-2-4-select-查询" class="header-anchor">#</a> 1.2.4 select 查询</h4> <ul><li>基本查询</li></ul> <p>查询 tablename 表中的所有数据。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>SELECT * FROM tablename;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>也可以不跟 <code>FROM</code> 子句，用于直接计算表达式。常用于检查数据库连接，比如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>SELECT 1;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>条件查询</li></ul> <p>可以只查询符合条件的数据。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>SELECT * FROM tablename 
WHERE condition;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>condition</code> 由逻辑表达式或者子条件组成，各子条件可以由 <code>NOT</code>/<code>AND</code>/<code>OR</code> 来修饰和连接。
不使用括号时，优先级从高到低依次是 <code>NOT</code>/<code>AND</code>/<code>OR</code>。</p> <ul><li>投影查询</li></ul> <p>可以只查询部分属性(列)，这种操作称为投影。同时列名也可以映射为自定义的名称：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>SELECT column1 AS col1, column2 AS col2
FROM tablename
WHERE condition;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>查询 <code>tablename</code> 表中符合 <code>condition</code> 条件的数据，最后只显示 column1 和 column2 的属性值，同时将 column1 的名称映射为 col1，将 column2 的名称映射为 col2.</p> <ul><li>查询结果排序</li></ul> <p>查询结果默认是以主键排序的。用户可以使用 <code>ORDER BY</code> 子句实现自定义的结果集排序：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>SELECT id, name, age
FROM person
WHERE id &lt; 100
ORDER BY age;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>顺序分为升序(ASC) 和降序(DESC)，默认不写就是升序，如果使用降序：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>SELECT id, name, age
FROM person
WHERE id &lt; 100
ORDER BY age DESC;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>可以同时对多列属性进行排序，比如有两个列参与排序：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>SELECT id, name, age, score
FROM person
WHERE id &lt; 100
ORDER BY age DESC, score;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>先按照 age 倒序排列，age 属性相同时按照 score 正序排列。</p> <ul><li>查询结果分组</li> <li>分页查询</li> <li>连接查询</li> <li>笛卡尔积</li> <li>组合查询</li></ul> <h2 id="_2-存储过程"><a href="#_2-存储过程" class="header-anchor">#</a> 2. 存储过程</h2></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">8/23/2021, 9:34:32 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.569dd3b1.js" defer></script><script src="/assets/js/2.1f448a3c.js" defer></script><script src="/assets/js/25.d35b508b.js" defer></script>
  </body>
</html>
